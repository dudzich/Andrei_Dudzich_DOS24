#!/bin/bash

# Проверяем, что передан хотя бы один аргумент (имя файла), второй аргумент (новое расширение) может быть пустым
if [ "$#" -lt 1 ]; then
    echo "Использование: $0 имя_файла [новое_расширение]"
    exit 1  # Завершаем выполнение скрипта с кодом ошибки
fi

# Сохраняем первый аргумент как исходное имя файла
file="$1"

# Сохраняем второй аргумент как новое расширение (если оно пустое, оставляем переменную пустой)
new_extension="$2"

# Проверяем, существует ли исходный файл
if [ ! -f "$file" ]; then
    echo "Ошибка: Файл '$file' не найден."
    exit 1  # Завершаем выполнение скрипта с кодом ошибки
fi

# Извлекаем имя файла без расширения
base_name="${file%.*}"

# Проверяем, есть ли в имени файла точка и расширение
if [ "$file" = "$base_name" ]; then
    # Файл не содержит расширения
    echo "Файл не содержит расширения."
else
    # Файл содержит расширение
    echo "Файл содержит расширение: ${file##*.}"
fi

# Если новое расширение не передано (переменная пустая), создаём файл без расширения
if [ -z "$new_extension" ]; then
    echo "Новое расширение не указано. Создаём файл без расширения."
    new_file="$base_name"  # Новый файл будет без расширения
else
    # Если расширение указано, создаём файл с новым расширением
    new_file="${base_name}.${new_extension}"
fi

# Копируем файл с новым именем, оставляя оригинальный файл
cp "$file" "$new_file"

# Выводим результат
echo "Файл сохранён с новым именем: $new_file"

