**Цель задания:** Написать bash-скрипт, который находит все файлы с заданным расширением в указанном каталоге и записывает их имена в указанный выходной файл.

**Описание решения:**

Разработан bash-скрипт `find_files.sh`, который принимает три аргумента:

1. **`<output_file>`:**  Имя выходного файла, в который будут записаны имена найденных файлов.
2. **`<directory>`:** Путь к каталогу, в котором будет осуществляться поиск.
3. **`[extension]`:** (Необязательный) Расширение файлов для поиска (без точки). Если не указан, скрипт найдёт файлы без расширения.

Скрипт выполняет следующие действия:

1. **Проверка аргументов:** Проверяет наличие достаточного количества аргументов и корректность указанного пути к каталогу.
2. **Проверка существования файла:** Проверяет, существует ли уже файл с указанным именем. Если да, выводит сообщение об ошибке.
3. **Проверка прав доступа:** Проверяет права на чтение в указанном каталоге и права на запись в текущий каталог для создания выходного файла.
4. **Поиск файлов:** Использует команду `find` для поиска файлов с указанным расширением (или без расширения, если аргумент не задан).
5. **Запись результатов:** Записывает имена найденных файлов в выходной файл.
6. **Вывод сообщения:** Выводит сообщение об успешном завершении или об ошибке, включая информацию о количестве найденных файлов и их расширении.

**Обработка ошибок:**

Скрипт обрабатывает следующие ошибки:

* Недостаточно аргументов командной строки.
* Каталог не существует или недоступен для чтения.
* Невозможно создать выходной файл (например, из-за отсутствия прав доступа).
* Файл с именем выходного файла уже существует.
* Ошибки при выполнении команды `find`.

![alt text](images/image-1.png)
![alt text](images/image-2.png)


**Листинг кода:**
```Bash
#!/bin/bash

# Проверка аргументов
if [ "$#" -lt 2 ]; then
    echo "Ошибка: Недостаточно аргументов. Использование: $0 <output_file> <directory> [extension]"
    exit 1
fi

output_file="$1"
directory="$2"
extension="$3"

# Проверка существования и прав доступа к директории
if [ ! -d "$directory" ]; then
    echo "Ошибка: Каталог '$directory' не существует."
    exit 1
fi

if [ ! -r "$directory" ]; then
    echo "Ошибка: Нет прав на чтение каталога '$directory'."
    exit 1
fi

# Проверка существования выходного файла и возможности записи
if [ -f "$output_file" ]; then
    echo "Ошибка: Файл '$output_file' уже существует. Переименуйте файл или удалите его."
    exit 1
elif ! touch "$output_file" 2>/dev/null; then
    echo "Ошибка: Невозможно создать файл '$output_file'. Проверьте права доступа."
    exit 1
fi

# Поиск файлов
if [ -z "$extension" ]; then
    find_command="find \"$directory\" -type f ! -name '*.*'"
else
  extension="${extension/#./}" # Удаляем точку, если она есть
  find_command="find \"$directory\" -type f -name \"*.$extension\""
fi

find_result=$(eval "$find_command" 2>&1)
status=$?

# Обработка результатов поиска
if [ $status -eq 0 ]; then
    echo "$find_result" > "$output_file"
    if [ -s "$output_file" ]; then
        echo "Имена файлов${extension:+ с расширением .$extension} из каталога '$directory' записаны в файл '$output_file'."
    else
        echo "В каталоге '$directory' не найдено файлов${extension:+ с расширением .$extension}."
    fi
else
    echo "Ошибка при выполнении команды find: $find_result"
    exit 1
fi

echo "Скрипт завершён."
exit 0
```


